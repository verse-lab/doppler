# Generated by Gareth Owen <gaz@athene.co.uk>

CC = clang-13
CFLAGS = -S -emit-llvm -c -g -O0 -Xclang -disable-O0-optnone -fno-discard-value-names
KLEE	= ../../thirdparty/klee/include
LDFLAGS = 
LIBS = 

SRC = main.c protocol.c util.c

OBJ = main.ll protocol.ll util.ll

default: $(SRC:.c=.ll) ghttpd

ghttpd: $(OBJ)
	llvm-link-13 -S $^ -o ghttpd.bc

%.ll: %.c
	$(CC) $(CFLAGS) -I$(KLEE) -c -o $@ $<

clean:
	rm -f *.o *.ll ghttpd.bc
